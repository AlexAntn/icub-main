IF (COMPILE_DEVICE_LIBRARY)
  PREPARE_DEVICE(pcan TYPE PlxCan
    INCLUDE PlxCan.h 
    WRAPPER "")
ENDIF (COMPILE_DEVICE_LIBRARY)

IF (NOT SKIP_pcan)
  FIND_PACKAGE(YARP REQUIRED)
  FIND_PACKAGE(PLXCANAPI)

  IF (NOT PLXCANAPI_FOUND)
    MESSAGE("pcan: cannot find plxcanapi, turn off device")
  ELSE (NOT PLXCANAPI_FOUND)
    INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
    INCLUDE_DIRECTORIES(${PLXCANAPI_INC_DIRS})
    LINK_LIBRARIES(${PLXCANAPI_LIB})

    #plx-api related define
    ADD_DEFINITIONS(-DPLX_LITTLE_ENDIAN -DPLX_LINUX -DGCC)
    ADD_LIBRARY(pcan PlxCan.cpp PlxCan.h)
  ENDIF (NOT PLXCANAPI_FOUND)
ENDIF (NOT SKIP_pcan)
