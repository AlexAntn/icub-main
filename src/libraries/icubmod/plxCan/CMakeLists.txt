  PREPARE_DEVICE(pcan TYPE PlxCan
    INCLUDE PlxCan.h 
    WRAPPER "")

if (NOT SKIP_pcan)
  FIND_PACKAGE(PLXCANAPI)

  IF (NOT PLXCANAPI_FOUND)
    MESSAGE("pcan: cannot find plxcanapi, turn off device")
  ELSE (NOT PLXCANAPI_FOUND)
        INCLUDE_DIRECTORIES(${YARP_INCLUDE_DIRS})
        INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
        INCLUDE_DIRECTORIES(${PLXCANAPI_INC_DIRS})

        #plx-api related define
        ADD_DEFINITIONS(-DPLX_LITTLE_ENDIAN -DPLX_LINUX -DGCC)
        ADD_LIBRARY(pcan PlxCan.cpp PlxCan.h)

        TARGET_LINK_LIBRARIES(pcan ${PLXCANAPI_LIB} ${YARP_LIBRARIES})
	
  ENDIF (NOT PLXCANAPI_FOUND)
  
endif (NOT SKIP_pcan)

