
/* @file       eEcommon.c
    @brief      This header file implements common parts of embENV.
    @author     marco.accame@iit.it
    @date       08/05/2011
**/

// --------------------------------------------------------------------------------------------------------------------
// - external dependencies
// --------------------------------------------------------------------------------------------------------------------

#include "emBODYporting.h" 

#include "stdint.h"
#include "string.h"



// --------------------------------------------------------------------------------------------------------------------
// - declaration of extern public interface
// --------------------------------------------------------------------------------------------------------------------

#include "eEcommon.h"


// --------------------------------------------------------------------------------------------------------------------
// - declaration of extern hidden interface 
// --------------------------------------------------------------------------------------------------------------------
// empty-section


// --------------------------------------------------------------------------------------------------------------------
// - definition (and initialisation) of extern variables, but better using _get(), _set() 
// --------------------------------------------------------------------------------------------------------------------
// empty-section



// --------------------------------------------------------------------------------------------------------------------
// - typedef with internal scope
// --------------------------------------------------------------------------------------------------------------------
// empty-section




// --------------------------------------------------------------------------------------------------------------------
// - #define with internal scope
// --------------------------------------------------------------------------------------------------------------------
// empty-section


// --------------------------------------------------------------------------------------------------------------------
// - declaration of static functions
// --------------------------------------------------------------------------------------------------------------------
// empty-section


// --------------------------------------------------------------------------------------------------------------------
// - definition (and initialisation) of static variables
// empty-section

                                                                             
// --------------------------------------------------------------------------------------------------------------------
// - definition of extern public functions

extern eEresult_t ee_common_ipnetwork_clr(eEipnetwork_t* ntw, uint64_t uniqueid)
{
    uint8_t ip3 = uniqueid & 0xff;
    uint8_t ip4 = (uniqueid>>8) & 0xff;
    if(NULL == ntw)
    {
        return(ee_res_NOK_generic);
    }

    
    ntw->macaddress  = (((uint64_t)EECOMMON_mac_oui_iit)) | ((uint64_t)((uniqueid) & 0xFFFFFF)<<24);
    ntw->ipaddress   = (uint32_t)EECOMMON_ipaddr_base_iit | EECOMMON_ipaddr_from(0, 0, ip3, ip4); 
    ntw->ipnetmask   = (uint32_t)EECOMMON_ipmask_default_iit; 
    
    return(ee_res_OK);
}





// --------------------------------------------------------------------------------------------------------------------
// - definition of extern hidden functions 
// --------------------------------------------------------------------------------------------------------------------
// empty-section


// --------------------------------------------------------------------------------------------------------------------
// - definition of static functions 
// --------------------------------------------------------------------------------------------------------------------
// empty-section



// --------------------------------------------------------------------------------------------------------------------
// - end-of-file (leave a blank line after)
// --------------------------------------------------------------------------------------------------------------------

